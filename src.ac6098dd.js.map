{"version":3,"sources":["js/headerMarkup.js","js/filmInfoModalCreate.js","index.js"],"names":["refs","nav","document","querySelector","header","container","buttons","input","navItems","appendHomeHeaderMarkup","e","target","nodeName","innerText","toLowerCase","changeToHomeHeaderMarkup","appendLibraryHeaderMarkup","changeToLibraryHeaderMarkup","lastElementChild","classList","add","firstElementChild","remove","addEventListener","movieContainer","modal","API_KEY","BASE_URL","filmId","onMovieCardClick","movieCard","hasSomeParentTheClass","dataset","id","createModal","element","classname","contains","parentNode","onCloseButtonClick","innerHTML","getFilmInfo","response","fetch","json","filmInfo","console","log","genres","map","genre","name","join","poster_path","original_title","title","vote_average","vote_count","popularity","overview","overlay","closeButton"],"mappings":";;;AAAA,MAAMA,EAAO,CACXC,IAAKC,SAASC,cAAc,OAC5BC,OAAQF,SAASC,cAAc,0BAC/BE,UAAWH,SAASC,cAAc,6BAClCG,QAASJ,SAASC,cAAc,mCAChCI,MAAOL,SAASC,cAAc,gCAC9BK,SAAUN,SAASC,cAAc,eAMnC,SAASM,EAAuBC,GAEN,QAAtBA,EAAEC,OAAOC,UACa,QAAtBF,EAAEC,OAAOC,UAC4B,SAArCF,EAAEC,OAAOE,UAAUC,eACkB,cAArCJ,EAAEC,OAAOE,UAAUC,eAEnBC,IAIJ,SAASC,EAA0BN,GACQ,eAArCA,EAAEC,OAAOE,UAAUC,eACrBG,IAIJ,SAASA,IAEPjB,EAAKQ,SAASU,iBAAiBC,UAAUC,IAAI,sBAC7CpB,EAAKQ,SAASa,kBAAkBF,UAAUG,OAAO,sBAEjDtB,EAAKI,OAAOe,UAAUC,IAAI,kBAC1BpB,EAAKI,OAAOe,UAAUG,OAAO,UAK7BtB,EAAKM,QAAQa,UAAUG,OAAO,mBAE9BtB,EAAKO,MAAMY,UAAUC,IAAI,mBAG3B,SAASL,IACPf,EAAKQ,SAASa,kBAAkBF,UAAUC,IAAI,sBAC9CpB,EAAKQ,SAASU,iBAAiBC,UAAUG,OAAO,sBAEhDtB,EAAKI,OAAOe,UAAUC,IAAI,UAC1BpB,EAAKI,OAAOe,UAAUG,OAAO,kBAK7BtB,EAAKM,QAAQa,UAAUC,IAAI,mBAE3BpB,EAAKO,MAAMY,UAAUG,OAAO,mBAhD9BtB,EAAKC,IAAIsB,iBAAiB,QAASd,GACnCT,EAAKC,IAAIsB,iBAAiB,QAASP;;ACVnC,MAAMhB,EAAO,CACTwB,eAAgBtB,SAASC,cAAc,WACvCsB,MAAOvB,SAASC,cAAc,eAG5BuB,EAAU,mCACVC,EAAW,qCACjB,IAAIC,EAAS,GAIb,SAASC,EAAiBnB,GAChBoB,MAAAA,EAAYC,EAAsBrB,EAAEC,OAAQ,SAC7CmB,IAGLF,EAASE,EAAUE,QAAQC,GAC3BC,KAGJ,SAASH,EAAsBI,EAASC,GAAW,IAAA,EAC3CD,OAAA,QAAAA,EAAAA,EAAQhB,iBAAR,IAAA,GAAA,EAAmBkB,SAASD,GAAmBD,EAC5CA,EAAQG,YAAcP,EAAsBI,EAAQG,WAAYF,GAG3E,SAASG,IACWvC,EAAKyB,MAAMtB,cAAc,uBACjCgB,UAAUG,OAAO,WACzBtB,EAAKyB,MAAMe,UAAY,GAG3B,eAAeC,IAEJC,aADgBC,SAAShB,KAAYC,aAAkBF,MAC9CkB,OAGpB,eAAeV,IACLW,MAAAA,QAAiBJ,IACvBK,QAAQC,IAAIF,GACNG,MAAAA,EAASH,EAASG,OAAOC,IAAIC,GAASA,EAAMC,MAAMC,KAAK,MAEvD3B,0OAM4DoB,EAASQ,wGAEZR,EAASQ,sEACxBR,EAASQ,4GAG1CR,EAASS,gIAIaT,EAASU,0JAIbV,EAASW,2GAETX,EAASY,0FAG5BZ,EAASa,gGAEcb,EAASS,oEAEhCN,uIAG4BH,EAASc,4hBAenD3D,EAAKyB,MAAMe,UAAYf,EAEjBmC,MAAAA,EAAU5D,EAAKyB,MAAMtB,cAAc,uBACnC0D,EAAc7D,EAAKyB,MAAMtB,cAAc,4BAE7CyD,EAAQzC,UAAUC,IAAI,WACtByC,EAAYtC,iBAAiB,QAASgB,GArF1CvC,EAAKwB,eAAeD,iBAAiB,QAASM;;ACP9C,aAFA,QAAA,oBACA,QAAA,qBACA,QAAA","file":"src.ac6098dd.js","sourceRoot":"../src","sourcesContent":["const refs = {\n  nav: document.querySelector('nav'),\n  header: document.querySelector('[data-action=\"header\"]'),\n  container: document.querySelector('[data-action=\"container\"]'),\n  buttons: document.querySelector('[data-action=\"library-buttons\"]'),\n  input: document.querySelector('[data-action=\"search-field\"]'),\n  navItems: document.querySelector('.nav__list'),\n};\n\nrefs.nav.addEventListener('click', appendHomeHeaderMarkup);\nrefs.nav.addEventListener('click', appendLibraryHeaderMarkup);\n\nfunction appendHomeHeaderMarkup(e) {\n  if (\n    e.target.nodeName === 'use' ||\n    e.target.nodeName === 'svg' ||\n    e.target.innerText.toLowerCase() === 'home' ||\n    e.target.innerText.toLowerCase() === 'filmoteka'\n  ) {\n    changeToHomeHeaderMarkup();\n  }\n}\n\nfunction appendLibraryHeaderMarkup(e) {\n  if (e.target.innerText.toLowerCase() === 'my library') {\n    changeToLibraryHeaderMarkup();\n  }\n}\n\nfunction changeToLibraryHeaderMarkup() {\n  //Подчеркивание елемента\n  refs.navItems.lastElementChild.classList.add('nav__item--current');\n  refs.navItems.firstElementChild.classList.remove('nav__item--current');\n  //Задний фон\n  refs.header.classList.add('library-header');\n  refs.header.classList.remove('header');\n  //Контейнер\n  // refs.container.classList.add('library-header__container');\n  // refs.header.classList.remove('container');\n  //Рендерим кнопки\n  refs.buttons.classList.remove('visually-hidden');\n  //Прячем поисковой инпут\n  refs.input.classList.add('visually-hidden');\n}\n\nfunction changeToHomeHeaderMarkup() {\n  refs.navItems.firstElementChild.classList.add('nav__item--current');\n  refs.navItems.lastElementChild.classList.remove('nav__item--current');\n  //Задний фон\n  refs.header.classList.add('header');\n  refs.header.classList.remove('library-header');\n  //Контейнер\n  // refs.container.classList.add('container');\n  // refs.header.classList.remove('library-header__container');\n  //Прячем кнопки\n  refs.buttons.classList.add('visually-hidden');\n  //Рендерим поисковой инпут\n  refs.input.classList.remove('visually-hidden');\n}\n","const refs = {\n    movieContainer: document.querySelector('.movies'),\n    modal: document.querySelector('.film-info'),\n}\n\nconst API_KEY = '306e564986f0782b8ec4bf227b0f3c28';\nconst BASE_URL = 'https://api.themoviedb.org/3/movie';\nvar filmId = '';\n\nrefs.movieContainer.addEventListener('click', onMovieCardClick);\n\nfunction onMovieCardClick(e) {\n    const movieCard = hasSomeParentTheClass(e.target, 'movie');\n    if (!movieCard) {\n        return;\n    }\n    filmId = movieCard.dataset.id;\n    createModal();\n}\n\nfunction hasSomeParentTheClass(element, classname) {\n    if (element.classList?.contains(classname)) return element;\n    return element.parentNode && hasSomeParentTheClass(element.parentNode, classname);\n}\n\nfunction onCloseButtonClick() {\n    const overlay = refs.modal.querySelector('.film-info__overlay');\n    overlay.classList.remove('is-open');\n    refs.modal.innerHTML = '';\n}\n\nasync function getFilmInfo() {\n    const response = await fetch(`${BASE_URL}/${filmId}?api_key=${API_KEY}`);\n    return response.json();\n}\n\nasync function createModal() {\n    const filmInfo = await getFilmInfo();\n    console.log(filmInfo);\n    const genres = filmInfo.genres.map(genre => genre.name).join(', ');\n\n    const modal = `\n<div class=\"film-info__overlay\">\n    <div class=\"film-info__container\">\n        <div class=\"film-info__poster\">\n          <img\n            loading=\"lazy\"\n            src=\"https://www.themoviedb.org/t/p/w600_and_h900_bestv2${filmInfo.poster_path}\"\n            srcset=\"\n              https://www.themoviedb.org/t/p/w600_and_h900_bestv2${filmInfo.poster_path} 1x,\n              https://www.themoviedb.org/t/p/w1280${filmInfo.poster_path}                2x\n            \"\n            class=\"film-info__image img\"\n            alt=\"${filmInfo.original_title}\"\n          />\n        </div>\n        <div class=\"film-info__text\">\n          <h2 class=\"film-info__title\">${filmInfo.title}</h2>\n          <dl class=\"film-info__properties list\">\n            <dt>Vote / Votes</dt>\n            <dd>\n              <span class=\"accent\">${filmInfo.vote_average}</span>\n              <span class=\"separator\">/</span>\n              <span class=\"simple\">${filmInfo.vote_count}</span>\n            </dd>\n            <dt>Popularity</dt>\n            <dd>${filmInfo.popularity}</dd>\n            <dt>Original Title</dt>\n            <dd class=\"original-title\">${filmInfo.original_title}</dd>\n            <dt>Genre</dt>\n            <dd>${genres}</dd>\n          </dl>\n          <h3 class=\"film-info__description-title\">About</h3>\n          <p class=\"film-info__description\">${filmInfo.overview}</p>\n          <div class=\"film-info__buttons\">\n            <button class=\"film-info__button film-info__button--accent\">add to watched</button>\n            <button class=\"film-info__button film-info__button--simple\">add to queue</button>\n          </div>\n        </div>\n        <button type=\"button\" class=\"film-info__close-button\">\n          <svg class=\"film-info__close-icon\" width=\"30\" height=\"30\">\n            <use href=\"./images/sprite.svg#close\"></use>\n          </svg>\n        </button>\n    </div>\n</div>\n    `;\n\n    refs.modal.innerHTML = modal;\n\n    const overlay = refs.modal.querySelector('.film-info__overlay');\n    const closeButton = refs.modal.querySelector('.film-info__close-button');\n\n    overlay.classList.add('is-open');\n    closeButton.addEventListener('click', onCloseButtonClick);\n}","import './sass/main.scss';\nimport './js/headerMarkup';\nimport './js/filmInfoModalCreate';"]}